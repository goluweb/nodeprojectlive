
<%- include ('../layout/header.ejs') %>


<div class="col-lg-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                <div class="d-flex justify-content-between">
                  <h4 class="card-title"></h4>
                  <a href="/chapter/show_chapter" style="padding:10px; border-radius:5px" class="btn-success"><i class="fa fa-plus-circle" aria-hidden="true"></i> Back </a>
               </div>
                  <p class="card-description">
                    <!-- Add class <code>.table-bordered</code> -->
                  </p>
                  <div class="table-responsive pt-3">
                    <table class="table table-bordered myTable">
                         <thead>
                        <tr>
                          <th>
                            Id
                          </th>
                          <th>
                            Videos
                          </th>
                        
                         
                          <th>
                            chapter
                          </th>

                          <th>
                            Discription
                          </th>
                          <th>
                            Notes
                          </th>
                          <th>
                            Mode
                          </th>
                         
                          <th>
                            Start & End Date
                          </th>

                          <th>
                            Action
                          </th>

                        </tr>
                      </thead>


                      <tbody>
                        <%  
                        i=1; 
                        chapter_videos.forEach(async function(chapter){ 
                        %>
                      
                        <tr>
                          <td>
                           <%= i %>
                          </td>
                          <td>
                            <%  if(chapter.videos.length > 0){ %> 
                              
                            <video controls poster=" <%= path %><%= chapter.lessionThumbnail %>" width="200px">
                                <!-- <source src=”<%= chapter.lessionThumbnail %>” type=video/ogg> -->
                                <source src=" <%= path%><%= chapter.videos[0].lession_video %>" type=video/mp4>
                              </video>
                            <% }else{ %>
                                <image width="100px" src=" <%= path %><%= chapter.lessionThumbnail %>">
                            <% } %> 
                          </td>

                          <td>
                           
                             <p><%= chapter.chapter_name %></p>
                            
                          </td>

                          <td>
                            <%= chapter.chapterDscription %>
                           </td>

                           <td>
                           <a href="<%= path %><%= chapter.notes %>" target="_blank" style="text-decoration: none;">View Docs</a>
                           </td>

                           <td>
                            <%= chapter.mode %>
                           </td>
                           <td>
                           <%=
                           chapter.lesstionStartDate.toLocaleString('default', {month: 'long',day:'numeric' }) %>
                           to
                           <%= chapter.lessionEndDate.toLocaleString('default', {day:'numeric' ,month: 'long' }) %>
                            %>
                           </td>
                         
                           
                        
                          <td>
                           

                         <a href="/chapter/delete_videos_chapter/<%= chapter._id %>/<%= path_ %>" data-toggle="tooltip" data-placement="top" title="delete Button" onclick = "if (! confirm('are you sure you want to delete this chapter?')) { return false; }" class="btn btn-primary  btn-sm"><i class="fa fa-trash" aria-hidden="true"></i></a>
                        
                      
                          </td>
                        
                        </tr>
                       
                       <%
                       i++;
                       });
                       %>
                       
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <%- include ('../layout/footer.ejs') %>
